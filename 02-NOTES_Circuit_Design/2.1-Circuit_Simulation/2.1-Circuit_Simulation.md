## MATLAB  
MATLAB .m file for simulation can be found [here](02-NOTES_Circuit_Design/2.1-Circuit_Simulation/BUCK_CONVERTER_V_OUT_SIMULATION.m)  
Image of MATLAB graph obtained can be found [here](02-NOTES_Circuit_Design/2.1-Circuit_Simulation/MATLAB_BUCK_GRAPH.png)
The full design implications due to this simulation is discussed in 2.2-Deciding Circuit Topology.  
  
MATLAB used to determine possible output voltages with Rload of output between 0.1 and 10 Ohms for buck converter.  
This MATLAB simulation revealed that using a Buck Converter for MPPT stage is NOT suitable as Req cannot be less than Rload. This creates issues for MPPT stage as we must operate at a required Req set by solar panel.  
**ASSUMPTIONS:**  
Since optimum operating voltage changes very little compared to optimum operating current for a solar panel, I chose to make the assumption that optimum operating voltage of panel is a constant 19.97V to simplify the problem. (this is optimum operating voltage as stated on my solar panel under specific conditions of temperature and irradiance.)  
It is vital to understand these conditions can vary which is why we need an MPPT algorithm.  
**MATLAB RESULTS**  
According to MATLAB simulation, we cannot harvest 100% power (100w) from solar panel once Rload exceeds 4 Ohms. This effect is exaggerated as Rload gets higher, with 50W becoming impossible with this topology as Rload reaches 8 Ohms.  
  
This made it evident I needed to switch topolgy to a topology that can present any Req necessary to panel irrespective of Rload, which is not constant and determined by Req of cascaded voltage controller stage.  
  
Therefore I have decided to use a 4-MOSFET buck/boost topology for MPPT stage.  
This is due to the fact that this topology can act as a buck, boost, or buck/boost topology based on switch configuration, and can be controlled dynamically between these topologies depending on equivalent resistance required and most efficient duty cycle (lowest switching losses) possible achieve this required equivalent resistance.  
  
## LT Spice  
[LTspice_Buck_Simulation](02-NOTES_Circuit_Design/2.1-Circuit_Simulation/BUCK_TRANSIENT_SIMULATION.asc)
Initial MPPT stage was crudely simulated using a constant input voltage source and an ideal switch controlled by a pulsed voltage source.  
    
Converter bucks 18V to 9V, with some parasitic losses reducing output voltage slightly.  

I noticed time taken to change output from 0V to 9V with source starting at 0V was faster with smaller inductor.  
  
I had not previously thought of the importance of transitioning voltage quickly when input voltage or duty cycle is abruptly changed.  
After some research, I believe that current mode control is most effective as a control method for this circuit, which still allows large inductor sizing without contributing to slow transient. This is discussed in notes "2.2-Deciding Circuit Topology", which can be found [here](02-NOTES-Circuit_Design/2.2-Deciding_Circuit_Topology.md).  